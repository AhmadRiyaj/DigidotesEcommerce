<%-  include('./admin_head')%>
<div class="preloader">
  <div class="lds-ripple">
    <div class="lds-pos"></div>
    <div class="lds-pos"></div>
  </div>
</div>

<div id="main-wrapper" data-layout="vertical" data-navbarbg="skin5" data-sidebartype="full" data-sidebar-position="absolute" data-header-position="absolute" data-boxed-layout="full">
 


  <%- include('./top') %>
<div class="page-wrapper">
  <div class="page-breadcrumb">
    <div class="row">
      <div class="col-12 d-flex no-block align-items-center">
        <h4 class="page-title" style="margin-right:10px;"> Categories </h4>
        <span class=" add_button"> <a href="/admin_add_category" class="btn btn-sm btn-primary"> Add Category</a></span>
        <div class="ms-auto text-end">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="index.php">Home</a></li>
              <li class="breadcrumb-item active" aria-current="page">
                Categories
              </li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  </div>

  <div class="container-fluid">

    <div class="row">
      <div class="col-12">
        <div class="card">
      <%  if (typeof message!== 'undefined' && message.length > 0) { %>
        
        <p><%= message %></p>
        <% } %>
          <table class="table">
            <thead>
              <tr>
                <!-- <th scope="col">#</th> -->
                <th scope="col">ID</th>
                <th scope="col">Categories</th>
                <th scope="col">Description</th>
                <th scope="col">Action</th>
              </tr>
            </thead>
               <tbody>
               <%  if (typeof all_categories!==undefined && all_categories ){  %> 
                    <% for(var i=0; i< all_categories.length; i++){  %>
                      <tr>
                        <td><%= all_categories[i].id+1  %></td>
                        <td><%= all_categories[i].category  %></td>
                        <td><%= all_categories[i].description %></td>
                        <td><%= all_categories[i].status %></td>
                        <td>
                          <span class="badge1 badge-edit"
                            ><a
                              href="/admin_add_category?category_id=<%= all_categories[i].id %>"
                              >Edit</a
                            ></span
                          >&nbsp;
                          <span class="badge1 badge-delete"
                            ><a onclick="delete_category('<%= all_categories[i].id %>')"
                              >Delete</a
                            ></span
                          >
                        </td>
                      </tr>
                    <%  } %>
              <%  } %>

               </tbody>
          </table>
        </div>

      </div>
    </div>
    <!-- ============================================================== -->
    <!-- End PAge Content -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- Right sidebar -->
    <!-- ============================================================== -->
    <!-- .right-sidebar -->
    <!-- ============================================================== -->
    <!-- End Right sidebar -->
    <!-- ============================================================== -->
  </div>
  <!-- ============================================================== -->
  <!-- End Container fluid  -->
  <!-- ============================================================== -->
  <!-- ============================================================== -->
  <!-- footer -->
  <!-- ============================================================== -->

  <!-- ============================================================== -->
  <!-- End footer -->
  <!-- ============================================================== -->
</div>

</div>

<script src="../assets/libs/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap tether Core JavaScript -->
<script src="../assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<!-- slimscrollbar scrollbar JavaScript -->
<script src="../assets/libs/perfect-scrollbar/dist/perfect-scrollbar.jquery.min.js"></script>
<script src="../assets/extra-libs/sparkline/sparkline.js"></script>
<!--Wave Effects -->
<script src="../dist/js/waves.js"></script>
<!--Menu sidebar -->
<script src="../dist/js/sidebarmenu.js"></script>
<!--Custom JavaScript -->
<script src="../dist/js/custom.min.js"></script>
<!-- this page js -->
<script src="../assets/extra-libs/multicheck/datatable-checkbox-init.js"></script>
<script src="../assets/extra-libs/multicheck/jquery.multicheck.js"></script>
<script src="../assets/extra-libs/DataTables/datatables.min.js"></script>
<script>
  /****************************************
   *       Basic Table                   *
   ****************************************/
  $("#zero_config").DataTable();
</script>
<script>
  function delete_category(category_id) {
    jQuery.ajax({
      url: "/delete_category",
      method: "get",
      dataType: "JSON",
      data: {
        category_id: category_id,
      },
      success: function (result) {
        console.log(result.message);
        window.location.reload();
      },
    });
  }
</script>



</body>

</html>